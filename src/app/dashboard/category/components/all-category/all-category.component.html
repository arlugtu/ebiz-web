<!-- BEGIN LOADER -->
<div id="load_screen" *ngIf="showLoader">
  <div class="loader">
    <div class="loader-content">
      <div class="spinner-grow align-self-center"></div>
    </div>
  </div>
</div>
<!--  END LOADER -->
<div class="layout-boxed layout-px-spacing">
  <h1 class="layout-top-spacing">Category</h1>
  <div class="row">
    <div class="col-12 text-end">
      <button type="button" class="btn btn-success" routerLink="./create">
        Add
      </button>
    </div>
  </div>
  <div class="row mt-2">
    <div class="col-12">
      <h6 id="allDataHeader" *ngIf="allData.length == 0"></h6>
      <div id="toggleAccordion" class="accordion">
        <div class="card" *ngFor="let data of allData">
          <div class="card-header">
            <section class="mb-0 mt-0">
              <div role="menu" class="collapsed d-flex align-items-center place-content-space-between"
                  data-bs-toggle="collapse" data-bs-target="#defaultAccordionOne"
                  aria-expanded="false" aria-controls="defaultAccordionOne"
                  (click)="common.toggleAccordion(data.category_id)">
                {{data.category_name}}
                <button type="button" class="btn btn-sm btn-danger"
                    (click)="$event.stopPropagation(); deleteData(data.category_id);">
                  Delete
                </button>
              </div>
            </section>
          </div>
          <div id="{{data.category_id}}" class="collapse" aria-labelledby="..."
              data-bs-parent="#toggleAccordion">
            <div class="card-body">
              <table class="table table-hover table-bordered">
                <thead >
                  <tr >
                    <th >Subcategory</th>
                    <th class="text-center">Actions</th>
                  </tr>
                  <tr >
                    <th >
                      <input id="subcategory-{{data.category_id}}" type="text"
                          class="form-control form-control-sm" required>
                    </th>
                    <th class="text-center">
                      <button type="button" class="btn btn-sm btn-success"
                          (click)="addSubcategory(data)">
                        Add
                      </button>
                    </th>
                  </tr>
                </thead>
                <tbody >
                  <ng-template ngFor let-child [ngForOf]="data.subcategory || []">
                    <tr >
                      <td >
                        {{child.subcategory_name}}
                      </td>
                      <td class="text-center">
                        <button type="button" class="btn btn-sm btn-danger"
                            (click)="deleteSubcategory(data, child.subcategory_id)">
                          Delete
                        </button>
                      </td>
                    </tr>
                  </ng-template>
                  <tr *ngIf="(data.subcategory || []).length == 0">
                    <td colspan="100">
                      No available data
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
